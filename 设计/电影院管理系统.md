# 电影院管理系统

## 需求

#### 用户需求

1. 进行订票服务
   1. 查询、修改、删除、增加
   2. 要有一些限定条件
   3. 通过座位的放缩图进行选座
      1. 假设是正方形
2. 可以提供评分系统
3. 用户的注册
   1. 账号和密码
4. 进行排序
   1. 根据评分进行排序
   2. 根据上映日期进行排序
   3. 根据

#### 管理需求

1. 可以根据订票的火热程度来进行适当的排座
2. 可以上传影片

## 设计

### 软件设计

#### 模块图

1. 根据功能进行模块化划分

#### 流程图

1. 用户的使用流程

### 数据库设计

#### 概念结构

1. e-r图
   1. 实体
2. 或者uml图

#### 逻辑设计

1. 进行范式转换
2. 建表

好的，以下是对电影院管理系统的数据库逻辑设计，包括表格、主键和外键的设计。

首先，我们根据之前的ER图，可以将各个实体和它们之间的关系转化为以下的表格：

#### 电影表（movies）
| 字段         | 数据类型     | 主键/外键   | 约束条件                         |
| ------------ | ------------ | ----------- | -------------------------------- |
| movie_id     | INT          | PRIMARY KEY | NOT NULL, UNIQUE, AUTO_INCREMENT |
| title        | VARCHAR(255) |             | NOT NULL                         |
| director     | VARCHAR(255) |             | NOT NULL                         |
| genre        | VARCHAR(255) |             | NOT NULL                         |
| duration     | INT          |             | NOT NULL                         |
| release_date | DATE         |             | NOT NULL                         |

#### 放映厅表（halls）
| 字段     | 数据类型     | 主键/外键   | 约束条件                         |
| -------- | ------------ | ----------- | -------------------------------- |
| hall_id  | INT          | PRIMARY KEY | NOT NULL, UNIQUE, AUTO_INCREMENT |
| name     | VARCHAR(255) |             | NOT NULL                         |
| capacity | INT          |             | NOT NULL                         |

#### 座位表（seats）
| 字段    | 数据类型 | 主键/外键   | 约束条件                                              |
| ------- | -------- | ----------- | ----------------------------------------------------- |
| seat_id | INT      | PRIMARY KEY | NOT NULL, UNIQUE, AUTO_INCREMENT                      |
| row     | INT      |             | NOT NULL                                              |
| number  | INT      |             | NOT NULL                                              |
| hall_id | INT      | FOREIGN KEY | NOT NULL, REFERENCES halls(hall_id) ON DELETE CASCADE |

#### 场次表（screenings）
| 字段         | 数据类型     | 主键/外键   | 约束条件                                                |
| ------------ | ------------ | ----------- | ------------------------------------------------------- |
| screening_id | INT          | PRIMARY KEY | NOT NULL, UNIQUE, AUTO_INCREMENT                        |
| movie_id     | INT          | FOREIGN KEY | NOT NULL, REFERENCES movies(movie_id) ON DELETE CASCADE |
| hall_id      | INT          | FOREIGN KEY | NOT NULL, REFERENCES halls(hall_id) ON DELETE CASCADE   |
| start_time   | DATETIME     |             | NOT NULL                                                |
| price        | DECIMAL(5,2) |             | NOT NULL                                                |

#### 订单表（tickets）
| 字段         | 数据类型 | 主键/外键   | 约束条件                                                     |
| ------------ | -------- | ----------- | ------------------------------------------------------------ |
| ticket_id    | INT      | PRIMARY KEY | NOT NULL, UNIQUE, AUTO_INCREMENT                             |
| user_id      | INT      | FOREIGN KEY | NOT NULL, REFERENCES users(user_id) ON DELETE CASCADE        |
| screening_id | INT      | FOREIGN KEY | NOT NULL, REFERENCES screenings(screening_id) ON DELETE CASCADE |
| ticket_time  | DATETIME |             | NOT NULL                                                     |

#### 用户表（users）
| 字段     | 数据类型     | 主键/外键   | 约束条件                         |
| -------- | ------------ | ----------- | -------------------------------- |
| user_id  | INT          | PRIMARY KEY | NOT NULL, UNIQUE, AUTO_INCREMENT |
| username | VARCHAR(255) |             | NOT NULL                         |
| password | VARCHAR(255) |             | NOT NULL                         |
| email    | VARCHAR(255) |             | NOT NULL                         |

上面的表格中，主键和外键分别以粗体和斜体标注。我们可以看到，所有表格都已经满足BCNF，即每个表格都已经消除了所有的传递依赖。此外，我们还在座位表中添加了外键hall_id，用于关联座位和放映厅的关系，以保证



|          | 字段名       | 类型         | 主键/外键 |
| -------- | ------------ | ------------ | --------- |
| 电影     | ID           | INT          | 主键      |
|          | 名称         | VARCHAR(50)  |           |
|          | 类型         | VARCHAR(50)  |           |
|          | 放映状态     | INT          |           |
|          | 图片url      | VARCHAR(200) |           |
|          | 电影简介     | VARCHAR(500) |           |
|          | 开始放映时间 | DATATIME     |           |
| 放映厅   | ID           | INT          | 主键      |
|          | 名称         | VARCHAR(50)  |           |
| 放映场次 | ID           | INT          | 主键      |
|          | 开始时间     | DATETIME     |           |
|          | 影片ID       | INT          | 外键      |
|          | 放映厅ID     | INT          | 外键      |
|          |              |              |           |
| 座位     | ID           | INT          | 主键      |
|          | 行号         | VARCHAR(1)   |           |
|          | 列号         | INT          |           |
|          | 放映厅ID     | INT          | 外键      |
| 电影票   | ID           | LONG         | 主键      |
|          | 用户ID       | INT          | 外键      |
|          | 放映场次ID   | INT          | 外键      |
|          | 座位ID       | INT          | 外键      |
|          |              |              |           |
|          | 票价         | INT          |           |
| 订单     | ID           | LONG         | 主键      |
|          | 购票时间     | DATETIME     |           |
|          | 电影票ID     | INT          | 外键      |
|          | 用户ID       | INT          | 外键      |
| 用户     | ID           | INT          | 主键      |
|          | 用户名       | VARCHAR(50)  |           |
|          | 密码         | VARCHAR(50)  |           |



|         | 字段名        | 类型         | 备注       | 主键/外键 |
| ------- | ------------- | ------------ | ---------- | --------- |
| movie   | id            | INT          | id         | 主键      |
|         | title         | VARCHAR(50)  | 电影名     |           |
|         | genre         | VARCHAR(50)  | 类型       |           |
|         | show_status   | INT          | 是否放映   |           |
|         | image_url     | VARCHAR(200) | 图片url    |           |
|         | introduction  | VARCHAR(500) | 简介       |           |
|         | release_date  | DATATIME     | 上映时间   |           |
| room    | id            | INT          | id         | 主键      |
|         | name          | VARCHAR(50)  | 名称       |           |
| session | id            | INT          | id         | 主键      |
|         | start_time    | DATETIME     | 开始时间   |           |
|         | movie_id      | INT          | 影片ID     | 外键      |
|         | room_id       | INT          | 放映厅ID   | 外键      |
|         |               |              |            |           |
| seat    | id            | INT          | id         | 主键      |
|         | 行号          | VARCHAR(1)   | 行号       |           |
|         | 列号          | INT          | 列号       |           |
|         | 放映厅ID      | INT          | 放映厅ID   | 外键      |
| ticket  | id            | LONG         | id         | 主键      |
|         | user_id       | INT          | 用户ID     | 外键      |
|         | session_id    | INT          | 放映场次ID | 外键      |
|         | seat_id       | INT          | 座位ID     | 外键      |
|         |               |              |            |           |
|         | price         | INT          | 票价       |           |
| order   | id            | LONG         |            | 主键      |
|         | purchase_time | DATETIME     | 购票时间   |           |
|         | ticket_id     | INT          | 电影票ID   | 外键      |
|         | user_id       | INT          | 用户ID     | 外键      |
| user    | id            | INT          |            | 主键      |
|         | username      | VARCHAR(50)  | 用户名     |           |
|         | password      | VARCHAR(50)  | 密码       |           |

#### 

#### 物理设计

1. 注重数据库的物理存储
2. 设置索引
3. B+树

## 功能

#### 前台

1. 导航栏有首页、电影查询部分
2. 还有我的设置
3. 电影资讯
4. 

## 开发环境

#### 前端

1. 

#### 

